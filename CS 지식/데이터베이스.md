# 데이터베이스
특정 조직의 여러 사용자가 공유하여 사용할 수 있도록 통합해서 저장한 운영 데이터의 집합

- 공유 데이터: 여러 응용 프로그램들이 공동으로 사용하는 데이터
- 저장 데이터: 컴퓨터가 접근 가능한 저장 매체에 저장된 데이터
- 통합 데이터: 검색의 효율성을 위해 중복이 최소화된 데이터의 모임
- 운영 데이터: 조직의 목적을 위해 존재 가치가 확실하고 반드시 필요한 데이터

### 데이터베이스 특징
- 실시간 접근성(Real-Time Accessibility) : 사용자의 데이터 요구에 즉시 응
- 지속적인 변화(Continuous Evloution) : 삽입(Insert), 삭제(Delete), 갱신(Update)으로 항상 최신의 데이터를 유지
- 동시 공용(Concurrent Sharing) :  다수의 사용자가 동시에 같은 내용의 데이터를 이용 가능
- 내용에 의한 참조(Content Reference) : 데이터를 참조할 때 데이터 레코드의 주소나 위치가 아닌 사용자가 요구하는 데이터 내용으로 찾음

# 데이터베이스 관리 시스템 (DBMS)
사용자와 데이터베이스를 연결시켜주는 소프트웨어로, 데이터베이스 사용자가 데이터베이스를 생성, 공유, 관리할 수 있도록 지원해주는 총체적인 역할을 담당

### 데이터베이스 관리 시스템의 기능
- 정의: 데이터베이스의 구조 정의
- 조작: 데이터의 검색, 삽입, 수정, 삭제 연산
- 제어: 데이터를 항상 정확하고 안전하게 유지 (데이터베이스 사용자 생성, 사용자 권한 부여, 접근 제어, 백업과 회복 등)

# 데이터베이스 시스템(DBS)
데이터베이스와 데이터베이스 관리 시스템을 이용해 조직에 필요한 정보를 제공해주는 전체 시스템 (데이터베이스 + 데이터베이스 관리 시스템 + 사용자(응용프로그램))

### 데이터베이스 시스템의 구조
![image](https://github.com/user-attachments/assets/e019429f-5b66-42fb-a261-768fc0f8b922)

- 외부(뷰) 단계: 데이터베이스를 개별 사용자 관점에서 이해하고 표현하는 단계
  - 데이터베이스의 각 사용자가 갖는 뷰(view)
  - 일반 사용자나 응용 프로그래머가 접근하는 계층
  - 여러 개의 외부 스키마가 있을 수 있음
- 개념(논리) 단계: 데이터베이스를 조직 전체의 관점에서 이해하고 표현하는 단계
  - 전체 데이터베이스의 논리적인 구조 정의
  - 하나의 데이터베이스에는 1개의 개념 스키마가 있음
- 내부(물리) 단계: 데이터베이스를 저장 장치의 관점에서 이해하고 표현하는 단계
  - 물리적 저장 장치에 데이터베이스가 실제로 저장되는 방법의 표현
  - 하나의 데이터베이스에는 1개의 내부 스키마가 있음

스키마: 데이터베이스에 저장되는 데이터 구조를 정의한 것

### 데이터 독립성
![image](https://github.com/user-attachments/assets/11db1f94-4d9f-49ed-9e99-7aa76997013d)

- 논리적 독립성: 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않음
- 물리적 독립성: 내부 스키마가 변경되어도 외부/개념 스키마에는 영향을 미치지 않음

# 데이터베이스 언어
- 데이터 정의어(DDL, Data Definition Language): 데이터 구조(스키마) 정의, 수정, 삭제
- 데이터 조작어(DML, Data Manipulation Language): 데이터 검색,삽입,삭제,수정
- 데이터 제어어(DCL, Data Control Language): 내부적으로 필요한 규칙이나 기법 정의, 권한 부여 등을 통한 보안, 회복, 동시성 제어 등

# 데이터 모델링
현실세계의 요소를 인간과 컴퓨터가 이해할 수 있는 정보로 표현한 것

### 데이터 모델링 과정
- 개념적 데이터 모델링: 현실 세계의 중요 데이터를 추출하여 (사람이 이해할 수 있는 형태의) 개념적 구조로 표현하는 과정, 개체-관계 데이터 모델
- 논리적 데이터 모델링: 개념 세계의 데이터를 데이터베이스에 저장하는 논리적 구조로 표현하는 과정, 사람이 이해하는 개념이면서 컴퓨터 내에서 데이터가 조직되는 방식과 멀리 떨어져 있지는 않음, 관계 데이터 모델
- 물리적 데이터 모델링: 데이터베이스에 데이터가 어떻게 저장되는가를 기술, 컴퓨터가 인식하는 것과 가까움

# 데이터 베이스 설계 단계
1. 요구 사항 분석: 데이터베이스의 용도 파악, 요구 사항 명세서
2. 개념적 설계: DBMS에 독립적인 개념적 구조 설계, 개념적 스키마(E-R 다이어그램)
3. 논리적 설계: DBMS에 적합한 논리적 구조 설계, 논리적 스키마(릴레이션 스키마)
4. 물리적 설계: DBMS로 구현 가능한 물리적 구조 설계, 물리적 스키마
5. 구현: SQL 문을 작성한 후 이를 DBMS에서 실행하여 데이터 베이스 생성

# 개체-관계 데이터 모델
개체와 개체 간의 관계를 이용하여 현실세계를 개념적 구조로 표현하는 방법

- 개체: 사람, 사물, 개념, 사건과 같이 독립적으로 존재하면서 고유하게 식별이 가능한 실세계의 객체
  - 개체 타입(entity type): 개체를 고유의 이름과 속성들로 정의한 것, 동일한 속성들을 가진 개체들의 틀(구조)
  - 개체 인스턴스(entity instance): 개체를 구성하고 있는 속성이 실제 값을 가짐으로써 실체화된 개체
  - 개체 집합(entity set): 특정 개체 타입에 대한 개체 인스턴스들을 모아놓은 것
- 속성: 개체나 관계가 가지고 있는 고유의 특성
  - 다중값 속성: 여러 개의 값을 가질 수 있는 속성 ex) ‘고객’ 개체의 ‘연락처’ 속성(집 전화번호와 휴대폰 번호 등 값을 여러 개 가질 수 있음
  - 복합 속성: 의미를 분해할 수 있는 속성 ex) ‘고객’ 개체의 ‘생년월일’ 속성 : 년, 월, 일로 의미 세분화
  - 유도 속성: 다른 속성의 값으로부터 유도되어 결정되는 속성 ex) ‘책’ 개체의 ‘판매가격’ 속성(‘가격’과 ‘할인율’ 속성으로부터 계산)
- 관계: 개체들 사이에 맺고 있는 연관이나 연결, 1:1, 1:N, N:M 관계가 있을 수 있다.
  - 관계 타입(relationship type): 개체 타입과 개체 타입 간의 연결 가능한 관계를 정의한 것(동질의 관계들의 틀)
  - 관계 인스턴스(relationship instance): 개체 인스턴스들간에 맺어진 연관
  - 관계 집합(relationship set): 동질의 관계 인스턴스들의 집합

![image](https://github.com/user-attachments/assets/018ad700-6118-43e3-a11a-c8148d309dd3)

### E-R 다이어그램 표기법
![image](https://github.com/user-attachments/assets/6f2c9b95-ee94-40d4-accb-56e8d513a490)

### 관계차수
![image](https://github.com/user-attachments/assets/4cfa81c4-e5ae-4e8d-86ed-9d128e1c83c1)

관계에 참여하는 개체 타입의 수

### 관계의 참여 특성
![image](https://github.com/user-attachments/assets/13ac868d-a5b2-4ccf-972a-4b8010d706c9)

개체 집합 내 모든 개체 인스턴스가 관계에 참여하는지 유무에 따른 특성

- 필수적 참여: 모든 개체 인스턴스가 관계에 반드시 참여해야 되는 것을 의미, 이중선으로 표현 ex) 모든 고객은 책을 반드시 구매해야 함
- 선택적 참여: 개체 인스턴스 중일부만 관계에 참여해도 되는 것을 의미, 선택적 참여 ex) (고객에 의해) 구매되지 않는 책이 있을 수 있음

### 관계의 속성
![image](https://github.com/user-attachments/assets/d1d482ba-5f0f-46b8-8d15-bb1648042fa1)

관계는 관계의 특징을 기술하는 속성들을 가질 수 있음

### 역할
![image](https://github.com/user-attachments/assets/ddd3efac-7182-4d8c-93cb-f38dec408923)

개체 간의 관계를 표현할 때 각 개체들은 고유한 역할(role)을 담당함, 관계의 의미를 명확하게 하기 위해 사용됨

### 순환 관계
![image](https://github.com/user-attachments/assets/13219981-d28d-40d1-ae94-9577c61dc745)

하나의 개체 타입이 동일한 개체 타입(자기 자신)과 순환적으로 관계를 가지는 형태(1항 관계), 순환적 관계에서는 반드시 역할을 표기해야 함

### 다중 관계
![image](https://github.com/user-attachments/assets/ec6c8026-16f5-4ffe-abf2-d788d77c88de)

개체 타입 사이에 2개 이상의 관계 타입이 존재할 수 있음

# 관계의 종속성
관계의 종속성에 따른 개체 분류

- 약한 개체: 다른 개체의 존재 여부에 의존적인 개체, 종속 개체, 자신을 식별해주는 강한 개체 타입이 없으면, 식별할 수 없는 종속된 개체, 키를 형성하기에 충분한 속성을 갖지 못한 개체 (기본키를 갖지 않는 개체)
- 강한 개체: 다른 개체의 존재 여부와 관계없이 독립적으로 존재하는(식별 가능한) 개체, 약한 개체의 존재 여부를 결정하는 개체

### 약한 개체의 특성
![image](https://github.com/user-attachments/assets/bb8324a9-ad3d-4252-affc-b165e598fc1b)

- 식별 개체(약한 개체에게 키 속성을 제공하는 강한 개체)가 존재해야만 한다.
- 약한 개체는 식별 관계에 필수적 참여, N:1 관계
- 약한 개체의 기본 키 = 식별 개체의 기본키+약한 개체의 구별자
- 구별자: 식별 개체의 기본키와 결합하여, 약한 개체의 각 인스턴스를 고유하게 식별해주는 속성

![image](https://github.com/user-attachments/assets/73a4674e-9e6f-4b03-acdb-184fd123d009)

# 관계대수
- 관계 대수(relational algebra): 원하는 데이터를 얻기 위해 데이터를 어떻게 찾는지에 대한처리 과정을 명시하는 절차적인 언어
- 관계 해석(relational calculus): 원하는 결과를 얻기 위해, 찾기를 원하는 데이터가 무엇인지만 명시하는 선언적인(비절차적인) 언어

관계 대수나 관계 해석으로 기술할 수 있는 모든질의를 기술할 수 있는 데이터베이스 언어를 관계적으로 완전(relationally complete)하다고 판단함

### 관계 대수식
관계대수 : 릴레이션 간 연산을 통해 결과 릴레이션을 찾는 절차를 기술한 언어, 이 연산을 수행하기 위한 식을 관계대수식(relationalalgebra expression)이라고 한다.

- 단항 연산자: 연산자 릴레이션
- 이항 연산자: 릴레이션1 연산자 릴레이션2

# 관계 대수 연산자
### 셀렉트
릴레이션에서 조건을 만족하는 투플을 추출하기 위한 연산자

- 단항 연산자
- 형식 : σ셀렉트조건 (R)
- 릴레이션의 속성, 상수, 비교 연산자( = , <>, <=,<, >=, >), 논리 연산자(AND, OR)를 조합하여 사용

![image](https://github.com/user-attachments/assets/339cecef-3f0d-4e18-83f3-3fb0b619ce92)

예시 1

![image](https://github.com/user-attachments/assets/b2cabfa2-3cc4-4996-99f4-1a6e43e78564)

예시 2

### 프로젝트
릴레이션에서 주어진 속성들의 값으로만 구성된 투플을 추출하기 위한 연산

- 단항 연산자
- 형식 : π속성리스트 (R)
- 셀렉트의 결과 릴레이션은 중복 투플이 없지만, 프로젝트 결과 릴레이션은 중복된 투플들 존재 가능. 그러나, 최종 결과 릴레이션에는 중복된 투플은 제거됨

![image](https://github.com/user-attachments/assets/f461ad62-8157-47a6-9ed7-d2e3961e7b11)

예시 1

![image](https://github.com/user-attachments/assets/52c0b233-2778-4ec1-86ce-c0be76cb9a22)

예시 2

기타 예시들
- 등급이 ‘gold’인 고객의 이름과 나이를 검색 -> π이름, 나이(σ등급='gold'(고객))
- C001 고객이 주문한 P003 제품의 판매자 이름과 수수료를 검색-> π이름, 수수료(σ고객번호='C001' AND 제품번호='P003'(판매자⋈주문))
- A005 판매자에게 주문하지 않은 고객의 이름을 모두 검색 -> π이름(고객) - π이름(σ판매자번호='A005'(주문⋈고객))
- 주문된 적이 있는 제품에 대해서만 제품명과 가격을 검색 -> π제품명, 가격(제품⋉주문)
- '소수빈' 혹은 '이지은'이 속한 부서번호와 부서위치가 '수원'인 부서의 부서번호를 모두 검색하라 (단, 중복된 데이터 X) -> π부서번호(σ사원이름='소수빈'or'이지은'(사원)) U π부서번호(σ부서위치 = '수원'(부서))
- '개발'부서에서 근무하는 모든 사원들의 사원이름을 검색하라 -> π사원이름(사원⋈σ부서이름='개발'(부서))

### 집합 연산자
- 합집합: R ∪ S 
- 차집합: R – S (R에는 속하지만 S에는 속하지 않은 투플)
- 교집합: R ∩ S
- 카티션 프로덕트: R × S (차수(속성)가 n+m이고, 카디날리티(투플)가 i*j)

# 조인
릴레이션 하나로 원하는 데이터를 얻을 수 없어, 관계가 있는 여러 릴레이션을 함께 사용해야 하는 경우 사용, 두 릴레이션의 공통 속성(조인 속성)을 기준으로 속성값이 같은 투플을 수평으로 결합하는 연산자

### 동등 조인
![image](https://github.com/user-attachments/assets/10766fd1-8c02-428b-8f43-d763159baf76)

조인에 참여하는 두 릴레이션의 속성 값을 비교하여 그 값이 같은 투플만 반환한다. 중복된 속성이 있을 수 있다. ⋈

### 세미 조인
두 릴레이션 간의 부분적인 조인으로, 조인 대상 릴레이션 중 하나의 정보만 유지하면서 조인하는 연산, 서브쿼리와 유사한 역할을 하며, 조건에 맞는 튜플을 필터링할 때 자주 사용된다. ⋉

### 자연 조인
![image](https://github.com/user-attachments/assets/0f375999-6c7f-42b8-a951-710fef456dd3)

동등 조인에서 조인에 참여한 속성이 두 번 나오지 않도록 두 번째 속성을 제거한 결과를 반환한다. 여러 가지 조인 연산자들 중에서 가장 자주 사용된다. ⋈N

# 외부 조인
자연조인 시 조인에 실패한 투플을 모두 보여주되 값이 없는 대응 속성에는 NULL 값을 채워서 반환한다. 모든 속성을 보여주는 기준 릴레이션의 위치에 따라 왼쪽(left) 외부조인, 오른쪽(right) 외부조인, 완전(full)외부조인으로 나뉜다. 

### 왼쪽 외부 조인
![image](https://github.com/user-attachments/assets/0149354a-3748-44f8-b497-8a99d0f98ea8)

릴레이션 R과 S의 왼쪽 외부 조인 연산은 R의 모든 투플들을 결과에 포함시키고, 만일 릴레이션 S에 관련된 투플이 없으면 결과 릴레이션에서 릴레이션 S의 속성들은 널값으로 채움 ⟕

### 오른쪽 외부 조인
![image](https://github.com/user-attachments/assets/0d3fe60c-7dbc-4f2d-9f8a-4e881513a528)

릴레이션 R와 S의 오른쪽 외부 조인 연산은 S의 모든 투플들을 결과에 포함시키고, 만일 릴레이션 R 에 관련된 투플이 없으면 결과 릴레이션에서 릴레이션 R의 속성들은 널값으로 채움 ​⟖


